<?xml version="1.0" encoding="utf-8" ?>
<odoo>


    <record id="stock_picking_batch_form_inherit_aop_sale" model="ir.ui.view">
        <field name="name">stock.picking.batch.form</field>
        <field name="model">stock.picking.batch</field>
        <field name="inherit_id" ref="stock_picking_batch.stock_picking_batch_form"/>
        <field name="arch" type="xml">

                 <xpath expr="/form/header/button[last()]" position="after">

                    <button name="create_purchase_order"
                            string="创建采购订单"
                            type="object"
                            class="oe_highlight"
                            attrs="{'invisible': [('picking_purchase_id', '!=', False)]}"
                            />

                </xpath>

                <field name="user_id" position="after">

                    <field name="dispatch_type"/>

                    <field name="plan_number"  attrs='{"invisible": [("dispatch_type", "not in", ["tlzc", "tlxc"])]}'/>

                    <field name="car_no"  attrs='{"invisible": [("dispatch_type", "not in", ["tlzc", "tlxc"])]}'/>

                    <field name="partner_id" string="供应商" widget="res_partner_many2one" domain="[('supplier','=',True)]" />

                    <field name="picking_purchase_id"
                           string="采购订单"
                           attrs="{'invisible': [('picking_purchase_id', '=', False)]}"
                       />

                </field>



                <xpath expr="//separator" position="attributes">
                    <attribute name="string">调度</attribute>
                </xpath>

                 <xpath expr="//field[@name='picking_ids']/tree/field[@name='backorder_id']" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </xpath>

                 <xpath expr="//field[@name='picking_ids']/tree/field[@name='scheduled_date']" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </xpath>

                <xpath expr="//field[@name='picking_ids']/tree/field[@name='date']" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </xpath>

                 <xpath expr="//field[@name='picking_ids']/tree/field[@name='name']" position="after">

                    <field name="product_id"/>
                      <field name="vin"/>
                     <field name="location_id"/>
                     <field name="location_dest_id"/>
                    <field name="operate_type_name"/>
                     <field name="must_loading" attrs='{"invisible": [("parent.dispatch_type", "not in", ["tlzc", "tlxc"])]}'/>
                     <!--
                     <field name="picking_type_id" string="作业"/>
                     <field name="product_uom_qty"/>
                     <field name="quantity_done"/>
                     -->

                </xpath>

                <!--
                <xpath expr="//field[@name='picking_ids']/tree/field[@name='must_loading']" position="attributes">
                    <attribute name="invisible">[("parent.dispatch_type", "not in", ["tlzc", "tlxc"])]</attribute>
                </xpath>
                -->
        </field>
    </record>

</odoo>